<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Automobile-Data</title>
    <style>
        body { font-family: Arial, sans-serif; margin:0; background-color:#f0f0f5; }
        header { background-color:#333; color:white; padding:20px; text-align:center; }
        .search-bar { background-color:white; padding:20px; display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:10px; }
        select, button { padding:6px; }
        .brands-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap:20px; margin:30px; }
        .brand { background-color:white; padding:20px; text-align:center; border-radius:8px; cursor:pointer; box-shadow:0 0 5px rgba(0,0,0,0.1); }
        .brand:hover { background-color:#e0e0ff; }
    </style>
</head>
<body>
    <header>
        <h1>Automobile-Data</h1>
    </header>

    <div class="search-bar">
        <select id="marke"><option value="">Marke</option></select>
        <select id="modell"><option value="">Modell</option></select>
        <select id="baujahr"><option value="">Baujahr</option></select>
        <select id="kraftstoff"><option value="">Kraftstoffart</option></select>
        <button onclick="searchAuto()">Suchen</button>
    </div>

    <div class="brands-grid" id="brandsGrid"></div>

    <script>
        let autos = [];

        fetch('autos.json')
            .then(response => response.json())
            .then(data => {
                autos = data;
                populateMarken();
                populateBrandsGrid();
            });

        const markeSelect = document.getElementById('marke');
        const modellSelect = document.getElementById('modell');
        const baujahrSelect = document.getElementById('baujahr');
        const kraftstoffSelect = document.getElementById('kraftstoff');

        // Marken laden
        function populateMarken() {
            const markenSet = new Set(autos.map(a=>a.marke));
            markenSet.forEach(m => markeSelect.add(new Option(m,m)));
        }

        // Wenn Marke ausgewählt wird → Modelle, Baujahr, Kraftstoff dynamisch anpassen
        markeSelect.addEventListener('change', () => {
            const selectedMarke = markeSelect.value;
            const filteredAutos = selectedMarke ? autos.filter(a => a.marke === selectedMarke) : autos;

            // Modelle
            modellSelect.innerHTML = '<option value="">Modell</option>';
            Array.from(new Set(filteredAutos.map(a=>a.modell))).forEach(m => modellSelect.add(new Option(m,m)));

            // Baujahr
            baujahrSelect.innerHTML = '<option value="">Baujahr</option>';
            Array.from(new Set(filteredAutos.map(a=>a.baujahr))).sort((a,b)=>a-b).forEach(bj => baujahrSelect.add(new Option(bj,bj)));

            // Kraftstoff
            kraftstoffSelect.innerHTML = '<option value="">Kraftstoffart</option>';
            Array.from(new Set(filteredAutos.map(a=>a.kraftstoff).filter(k=>k))).forEach(k => kraftstoffSelect.add(new Option(k,k)));
        });

        function populateBrandsGrid() {
            const brands = Array.from(new Set(autos.map(a=>a.marke)));
            const grid = document.getElementById('brandsGrid');
            brands.forEach(brand => {
                const div = document.createElement('div');
                div.className = 'brand';
                div.textContent = brand;
                div.onclick = () => window.location.href = 'results.html?marke=' + encodeURIComponent(brand);
                grid.appendChild(div);
            });
        }

        function searchAuto() {
            const params = new URLSearchParams({
                marke: markeSelect.value,
                modell: modellSelect.value,
                baujahr: baujahrSelect.value,
                kraftstoff: kraftstoffSelect.value
            });
            window.location.href = 'results.html?' + params.toString();
        }
    </script>
</body>
</html>
