<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Suchergebnisse</title>
</head>
<body>
    <h1>Suchergebnisse</h1>
    <ul id="results"></ul>

    <script>
        const params = new URLSearchParams(window.location.search);
        const marke = params.get('marke');
        const modell = params.get('modell');
        const baujahr = params.get('baujahr');
        const ps = params.get('ps');

        fetch('autos.json')
            .then(response => response.json())
            .then(autos => {
                const filtered = autos.filter(auto => {
                    return (!marke || auto.marke.toLowerCase().includes(marke.toLowerCase()))
                        && (!modell || auto.modell.toLowerCase().includes(modell.toLowerCase()))
                        && (!baujahr || auto.baujahr == baujahr)
                        && (!ps || auto.ps == ps);
                });

                const ul = document.getElementById('results');
                filtered.forEach(auto => {
                    const li = document.createElement('li');
                    li.textContent = `${auto.marke} ${auto.modell} (${auto.baujahr})`;
                    li.onclick = () => {
                        window.location.href = 'details.html?id=' + auto.id;
                    };
                    ul.appendChild(li);
                });

                if(filtered.length === 0) {
                    ul.innerHTML = '<li>Keine Autos gefunden</li>';
                }
            });
    </script>
</body>
</html>
