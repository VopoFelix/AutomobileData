<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Suchergebnisse - Automobile-Data</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
        }

        header {
            background-color: #333;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }

        .search-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px;
        }

        .search-container input {
            padding: 8px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .search-container button {
            padding: 8px 15px;
            font-size: 16px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .search-container button:hover {
            background-color: #555;
        }

        .sort-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 10px 0;
        }

        .sort-buttons button {
            padding: 8px 15px;
            font-size: 14px;
            background-color: #666;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .sort-buttons button:hover {
            background-color: #888;
        }

        .results {
            margin: 20px;
        }

        .result-card {
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .result-card:hover {
            background: #f0f0f0;
        }

        .back-button {
            display: block;
            margin: 30px auto;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
        }

        .back-button:hover {
            background-color: #555;
        }
    </style>
</head>
<body>
    <header>
        Suchergebnisse - Automobile-Data
    </header>

    <!-- Suchleiste -->
    <div class="search-container">
        <input type="text" id="marke" placeholder="Marke">
        <input type="text" id="modell" placeholder="Modell">
        <input type="text" id="baujahr" placeholder="Baujahr">
        <input type="text" id="kraftstoff" placeholder="Kraftstoffart">
        <button onclick="applyFilters()">Suchen</button>
    </div>

    <!-- Sortier-Buttons -->
    <div class="sort-buttons">
        <button onclick="sortResults('baujahr', true)">Baujahr ↑</button>
        <button onclick="sortResults('baujahr', false)">Baujahr ↓</button>
        <button onclick="sortResults('ps', true)">PS ↑</button>
        <button onclick="sortResults('ps', false)">PS ↓</button>
    </div>

    <!-- Ergebnisse -->
    <div class="results" id="results"></div>

    <!-- Zurück-Taste -->
    <button class="back-button" onclick="goBack()">Zurück</button>

    <script>
        const cars = [
            { id: 1, marke: "Audi", modell: "A4", baujahr: 2015, kraftstoff: "Benzin", ps: 150 },
            { id: 2, marke: "Audi", modell: "A6", baujahr: 2018, kraftstoff: "Diesel", ps: 190 },
            { id: 3, marke: "VW", modell: "Golf", baujahr: 2017, kraftstoff: "Benzin", ps: 110 },
            { id: 4, marke: "BMW", modell: "320i", baujahr: 2016, kraftstoff: "Benzin", ps: 170 },
            { id: 5, marke: "Mercedes", modell: "C200", baujahr: 2019, kraftstoff: "Diesel", ps: 160 }
        ];

        let filteredCars = [...cars];

        // URL-Parameter auslesen
        function getQueryParams() {
            const params = {};
            const queryString = window.location.search.substring(1);
            const pairs = queryString.split("&");
            for (let pair of pairs) {
                if (pair === "") continue;
                const [key, value] = pair.split("=");
                params[decodeURIComponent(key)] = decodeURIComponent(value || "");
            }
            return params;
        }

        // Filter anwenden
        function applyFilters() {
            const marke = document.getElementById("marke").value.toLowerCase();
            const modell = document.getElementById("modell").value.toLowerCase();
            const baujahr = document.getElementById("baujahr").value;
            const kraftstoff = document.getElementById("kraftstoff").value.toLowerCase();

            filteredCars = cars.filter(car =>
                (!marke || car.marke.toLowerCase().includes(marke)) &&
                (!modell || car.modell.toLowerCase().includes(modell)) &&
                (!baujahr || car.baujahr.toString() === baujahr) &&
                (!kraftstoff || car.kraftstoff.toLowerCase().includes(kraftstoff))
            );

            renderResults();
        }

        // Ergebnisse anzeigen
        function renderResults() {
            const resultsDiv = document.getElementById("results");
            resultsDiv.innerHTML = "";

            if (filteredCars.length === 0) {
                resultsDiv.innerHTML = "<p>Keine Ergebnisse gefunden.</p>";
                return;
            }

            filteredCars.forEach(car => {
                const card = document.createElement("div");
                card.className = "result-card";
                card.innerHTML = `
                    <strong>${car.marke} ${car.modell}</strong><br>
                    Baujahr: ${car.baujahr}, Kraftstoff: ${car.kraftstoff}, ${car.ps} PS
                `;
                card.onclick = () => goToDetails(car.id);
                resultsDiv.appendChild(card);
            });
        }

        // Sortieren
        function sortResults(key, ascending) {
            filteredCars.sort((a, b) => {
                if (ascending) return a[key] - b[key];
                else return b[key] - a[key];
            });
            renderResults();
        }

        // Initial laden mit Parametern
        function init() {
            const params = getQueryParams();
            if (params.marke) document.getElementById("marke").value = params.marke;
            if (params.modell) document.getElementById("modell").value = params.modell;
            if (params.baujahr) document.getElementById("baujahr").value = params.baujahr;
            if (params.kraftstoff) document.getElementById("kraftstoff").value = params.kraftstoff;

            applyFilters();
        }

        function goToDetails(id) {
            window.location.href = `details.html?id=${id}`;
        }

        function goBack() {
            window.location.href = "index.html";
        }

        init();
    </script>
</body>
</html>
